{% extends "../../layout.njk" %}
{% from "../../macro/error-summary.njk" import errorSummary %}

{% block pageTitle %}
  Please update your account information - {{ currentService.name }} - GOV.UK Pay
{% endblock %}

{% block mainContent %}
  <div class="govuk-grid-column-two-thirds">
    {% if errors %}
        {{ errorSummary({
            errors: errors,
            keyIsHref: true
        }) }}
    {% endif %}

    <h1 class="govuk-heading-l">Please update your account information</h1>
    <p class="govuk-body">GOV.UK Pay's provider, Stripe, have updated thier account compliance requirements.</p>
    <p class="govuk-body">Updating information about your business is required to help protect against fraud and stay current with Know Your Customer (KYC) regulations.</p>
    <p class="govuk-body">All additional required information will be stored by Stripe, not GOV.UK Pay.</p>

    {# enctype="multipart/form-data" #}
    <form
        id="compliance-required-info-form"
        method="POST"
        action="/stripe-compliance-2020"
        class="govuk-!-margin-top-6"
        novalidate>
        <input id="csrf" name="csrfToken" type="hidden" value="{{ csrf }}"/>
        <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h1 class="govuk-fieldset__heading">
                Your organisation
                </h1>
            </legend>

            {{ govukInput({
                label: { html: '<span class="govuk-visually-hidden">Your organisation</span> Email' },
                id: "organisation-email",
                name: "organisation-email",
                value: form["organisation-email"],
                errorMessage: {
                    text: errors["organisation-email"]
                } if errors["organisation-email"]
            }) }}

            {{ govukInput({
                label: { html: '<span class="govuk-visually-hidden">Your organisation</span> Website' },
                id: "organisation-url",
                name: "organisation-url",
                value: form["organisation-url"],
                errorMessage: {
                    text: errors["organisation-url"]
                } if errors["organisation-url"]
            }) }}
        </fieldset>

        <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h1 class="govuk-fieldset__heading">
                Your responsible person
                </h1>
            </legend>


            <p class="govuk-body">As a reminder, the responsible person for this account is <b>{{ responsiblePerson.first_name }} {{ responsiblePerson.last_name }}</b>.</p>

            {{ govukInput({
                label: { html: '<span class="govuk-visually-hidden">Responsible person</span> Email' },
                id: "person-email",
                name: "person-email",
                value: form["person-email"],
                errorMessage: {
                    text: errors["person-email"]
                } if errors["person-email"]
            }) }}

            {{ govukInput({
                label: { html: '<span class="govuk-visually-hidden">Responsible person</span> Phone number' },
                id: "person-number",
                name: "person-number",
                value: form["person-number"],
                errorMessage: {
                    text: errors["person-number"]
                } if errors["person-number"]
            }) }}

            {{ govukInput({
                label: { html: '<span class="govuk-visually-hidden">Responsible person</span> Job title' },
                id: "person-job-title",
                name: "person-job-title",
                value: form["person-job-title"],
                errorMessage: {
                    text: errors["person-job-title"]
                } if errors["person-job-title"]
            }) }}

            {{ govukFileUpload({
                id: "person-document",
                name: "person-document",
                label: { html: 'Upload a <span class="govuk-visually-hidden">responsible person</span> verification document' },
                errorMessage: {
                    text: errors["person-document"]
                } if errors["person-document"],
                attributes: {
                    "accept": "image/jpeg, image/png, application/pdf"
                }
            }) }}
            {# <div class="govuk-form-group">
                <label class="govuk-label" for="person-documnet">
                Upload a <span class="govuk-visually-hidden">responsible person</span> verification document
                </label>
                <div id="verification-document-hint" class="govuk-hint">
                    A document showing address, either a passport, local ID card, or utility bill from a well-known utility company.
                </div>
                <input class="govuk-file-upload" id="person-documnet" name="person-document" type="file">
            </div> #}
        </fieldset>


        {{ govukButton({ text: "Save and continue" }) }}
    </form>
   </div>
{% endblock %}